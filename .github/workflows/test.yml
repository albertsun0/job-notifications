name: Test
run-name: Sraping Jobs ðŸš€
on:
  [push]
  # schedule:
  #     - cron:  '0 10 * * *'
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ðŸŽ‰ The job was automatically triggered by a event."

      - name: checkout repo
        uses: actions/checkout@v2

      - name: setup python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: install requirements
        run: pip install -r requirements.txt

      - name: run scraper
        run: python scrape.py

      - name: print output
        run: echo "RESULT=$SCRAPER_OUTPUTS"

      - name: Get Current Time as ENV
        run: echo "NOW=$(date +'%Y-%m-%dT%H:%M:%S')" >> $GITHUB_ENV

      - name: Create Issue With Results
        uses: dacbd/create-issue-action@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: New Jobs Scraped - ${{ env.NOW }}

          # Auto-assign person who triggered the failure.
          assignees: ${{ github.actor }},${{ github.triggering_actor }}
          labels: scrape
          body: |
            ${{ env.SCRAPER_OUTPUTS }}
